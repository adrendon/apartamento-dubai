"use strict";(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[2026],{52026:(e,n,t)=>{t.d(n,{GI:()=>m,I9:()=>b,IV:()=>f,VM:()=>d,Y7:()=>O,du:()=>y,vM:()=>l});var r=t(68909),o=t(77201),i=t(78229),u=t(96659),c=t(65882);if(5602==t.j)var s=t(9997);var a=t(40397),p=t(86866);const l={count:0};function d(e){return(0,o.Sh)((()=>e(new s.Jq)),(()=>e(new s.sD)),!1)}const f=e=>{const{additionalFilter:n,sweepData:t,direction:r,sourceSweep:o,ignoreSweeps:c,directionFactor:s,considerTrims:a,meshQuery:p}=e;if(!t.currentSweepObject)return[];const l=o||t.currentSweepObject;let d=i.xg(l);a&&p&&!l.neighborsEdited&&(d=S(l,p));const f=[i.AU(l),i.Ol(),d,i.jW(l.position,r,s)];for(const e of c||[])f.push(i.AU(e));const m=[u.oW(l.position,r),u.Io(l.position)];return n&&f.push(n),t.sortByScore(f,m)},m=e=>{const{sweepData:n,direction:t,viewDirection:r,sourceSweep:o,ignoreSweeps:s=[],directionFactor:a,additionalFilter:p,meshQuery:d,scorers:f=[],filters:m=[]}=e;if(!n.currentSweepObject)return[];const b=t.clone().normalize(),y=r?r.clone().normalize():void 0,O=o||n.currentSweepObject;m.push(i.AU(O),i.Ol(),i.fm(O.position,c.U.maxDistSameFloor*c.U.maxDistSameFloor),i.Zx());for(const e of s)m.push(i.AU(e));return d&&!O.neighborsEdited||m.push(i.xg(O)),y?m.push(g(O,b,y,null!=a?a:c.U.directionFactor,c.U.viewDirectionFactor)):m.push(i.jW(O.position,b,a)),p&&m.push(p),d&&!O.neighborsEdited&&m.push(i.Zz.negate(w(O,d))),y&&f.push(u.VY(O.position,y,c.U.viewDirectionWeight)),f.push(u.oW(O.position,b,c.U.directionWeight),u.Io(O.position),P(O),j(O.sourceViewId)),l.count=0,n.sortByScore(m,f)},b=(e,n,t,r,o=[],s=[])=>{const a=s.slice(),p=o.slice();a.push(i.Ol(),i.Zx()),p.push(u.Io(t.point));const d=e.currentSweepObject;n&&d?(a.push(i.AU(d),i.lp(d.position,c.U.longerTransitionMaxDist),i.xg(d)),p.push(v(e),j(d.sourceViewId))):a.push(i.lp(t.point,c.U.longerTransitionMaxDist)),t.face&&a.push(i.DJ(t.point,t.face.normal));const f=null==r?void 0:r.floorIdFromObject(t.object);f&&a.push(i.Eo(f));const m=null==r?void 0:r.mdsRoomIdFromObject(t.object);m&&a.push(h(m)),l.count=0;const b=e.sortByScore(a,p);if(0===b.length){const n=e.getClosestSweep(t.point,!0,(e=>s.every((n=>n(e)))));b.push({sweep:n,score:0})}return b},y=e=>{const{sweepData:n,inside:t=!1,point:o,meshQuery:i,callerScorers:u=[],callerFilters:c=[]}=e,s={distance:0,point:(new r.Vector3).copy(o),object:{raycast:(e,n)=>{},renderOrder:0}};return b(n,t,s,i,u,c)},O=(e,n,t)=>{const r=(0,a.kf)(e,n);return t&&r.multiply(t),(0,p.V5)(r)},v=e=>{function n(n){return e.containsSweep(n.id)?5:-5}return Object.defineProperty(n,"name",{value:"_preferUnfiltered"}),n},j=e=>{function n(n){return e===n.sourceViewId?1:-1}return Object.defineProperty(n,"name",{value:"_bySameView"}),n},h=e=>{function n(n){return e===n.roomId}return Object.defineProperty(n,"name",{value:"_bySameRoom"}),n},g=(e,n,t,r,o)=>{const u=i.jW(e.position,n,r);Object.defineProperty(u,"name",{value:"_filterByDir"});const c=i.Zz.some(i.Zz.every(u,i.lp(e.position,5)),i.jW(e.position,t,o));Object.defineProperty(c,"name",{value:"_filterByDirOrViewDir"});return n.dot(t)<.25?u:c},w=(e,n)=>{function t(t){return l.count++,n.isSegmentOccluded(e.position,t.position)}return Object.defineProperty(t,"name",{value:"_notRaycastNeighbors"}),t},S=(e,n)=>{const t=i.Zz.some(i.xg(e),i.Zz.every(i.Zz.negate(i.xg(e)),i.Zx(),i.Ol(),i.fm(e.position,c.U.maxDistSameFloor*c.U.maxDistSameFloor),((e,n)=>{function t(t){return n.isSegmentTrimmed(e.position,t.position)}return Object.defineProperty(t,"name",{value:"_intersectsTrim"}),t})(e,n),i.Zz.negate(w(e,n))));return Object.defineProperty(t,"name",{value:"_filterByNeighborOrTrim"}),t},P=e=>{function n(n){return i.xg(e)(n)?1:-1}return Object.defineProperty(n,"name",{value:"_visionNeighbors"}),n}},78229:(e,n,t)=>{t.d(n,{AU:()=>u,DJ:()=>y,Eo:()=>f,GS:()=>a,OX:()=>l,Ol:()=>b,Pi:()=>O,Zx:()=>p,Zz:()=>h,f:()=>s,fm:()=>j,jW:()=>m,lp:()=>v,sT:()=>d,xg:()=>c});var r=t(50018),o=t(68909);const i=.25,u=e=>{function n(n){return n!==e}return Object.defineProperty(n,"name",{value:"_not"}),n},c=e=>{function n(n){return!!e.neighbours&&(-1!==e.neighbours.indexOf(n.id)||-1!==e.neighbours.indexOf(n.platformId))}return Object.defineProperty(n,"name",{value:"_neighbor"}),n},s=e=>{function n(n){return e===n||c(e)(n)}return Object.defineProperty(n,"name",{value:"_neighborOrSelf"}),n};function a(e){return e&&e.placementType===r.EO.MANUAL}function p(){function e(e){return e&&e.alignmentType===r.c$.ALIGNED}return Object.defineProperty(e,"name",{value:"_aligned"}),e}const l=()=>{function e(e){return e&&e.alignmentType!==r.c$.ALIGNED}return Object.defineProperty(e,"name",{value:"_unaligned"}),e},d=e=>{function n(n){return n&&e.floorId===n.floorId}return Object.defineProperty(n,"name",{value:"_sameFloor"}),n},f=e=>{function n(n){return n&&e===n.floorId}return Object.defineProperty(n,"name",{value:"_onFloor"}),n},m=(()=>{const e=new o.Vector3,n=new o.Vector3;return(t,r,o=i)=>{function u(i){return e.copy(i.position).sub(t).normalize().dot(n.copy(r))>o}return Object.defineProperty(u,"name",{value:"_inDirection"}),u}})(),b=()=>{function e(e){return e&&e.enabled}return Object.defineProperty(e,"name",{value:"_enabled"}),e},y=(e,n)=>{const t=new o.Vector3;function r(r){return t.copy(r.position).sub(e).normalize().dot(n)>0}return n=n.clone(),Object.defineProperty(r,"name",{value:"_byNormal"}),r},O=(e,n)=>{function t(t){return e.distanceTo(t.position)>n}return Object.defineProperty(t,"name",{value:"_outsideMaxDist"}),t},v=(e,n)=>{function t(t){return e.distanceTo(t.position)<n}return Object.defineProperty(t,"name",{value:"_inMaxDist"}),t},j=(e,n)=>{function t(t){return e.distanceToSquared(t.position)<n}return Object.defineProperty(t,"name",{value:"_inMaxSqDist"}),t},h={negate:e=>function(n){return!e.call(e,n)},every:(...e)=>function(n){return e.every((e=>e(n)))},some:(...e)=>function(n){return e.some((e=>e(n)))}}},96659:(e,n,t)=>{t.d(n,{Io:()=>c,VY:()=>a,cv:()=>p,d$:()=>u,oW:()=>s});var r=t(68909);const o=-1,i=10,u=(e,n=o)=>{function t(t){return e.distanceToSquared(t.position)*n}return Object.defineProperty(t,"name",{value:"_distanceSq"}),t},c=(e,n=o)=>{function t(t){return e.distanceTo(t.position)*n}return Object.defineProperty(t,"name",{value:"_distance"}),t},s=(e,n,t=i)=>{const o=new r.Vector3;function u(r){return o.copy(r.position).sub(e).normalize().dot(n)*t}return Object.defineProperty(u,"name",{value:"_direction"}),u},a=(e,n,t=i)=>{const o=new r.Vector3;function u(r){return o.copy(r.position).sub(e).normalize().dot(n)*t}return Object.defineProperty(u,"name",{value:"_viewDirNorm"}),u},p=(e,n=o)=>{function t(t){return e.distanceToSquared(t.floorPosition)*n}return Object.defineProperty(t,"name",{value:"_floorDistSq"}),t}}}]);