"use strict";(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[2031],{48089:t=>{const e=t=>"object"==typeof t&&null!==t,s=Symbol("skip"),n=t=>e(t)&&!(t instanceof RegExp)&&!(t instanceof Error)&&!(t instanceof Date),i=(t,e,o,r=new WeakMap)=>{if(o={deep:!1,target:{},...o},r.has(t))return r.get(t);r.set(t,o.target);const{target:a}=o;delete o.target;const c=t=>t.map((t=>n(t)?i(t,e,o,r):t));if(Array.isArray(t))return c(t);for(const[h,u]of Object.entries(t)){const p=e(h,u,t);if(p===s)continue;let[l,d,{shouldRecurse:f=!0}={}]=p;"__proto__"!==l&&(o.deep&&f&&n(d)&&(d=Array.isArray(d)?c(d):i(d,e,o,r)),a[l]=d)}return a};t.exports=(t,s,n)=>{if(!e(t))throw new TypeError(`Expected an object, got \`${t}\` (${typeof t})`);return i(t,s,n)},t.exports.mapObjectSkip=s},99173:(t,e,s)=>{s.r(e),s.d(e,{snakeCase:()=>u});var n=function(){return n=Object.assign||function(t){for(var e,s=1,n=arguments.length;s<n;s++)for(var i in e=arguments[s])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)};Object.create;Object.create;var i=function(){return i=Object.assign||function(t){for(var e,s=1,n=arguments.length;s<n;s++)for(var i in e=arguments[s])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)};Object.create;Object.create;function o(t){return t.toLowerCase()}var r=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],a=/[^A-Z0-9]+/gi;function c(t,e,s){return e instanceof RegExp?t.replace(e,s):e.reduce((function(t,e){return t.replace(e,s)}),t)}function h(t,e){return void 0===e&&(e={}),function(t,e){void 0===e&&(e={});for(var s=e.splitRegexp,n=void 0===s?r:s,i=e.stripRegexp,h=void 0===i?a:i,u=e.transform,p=void 0===u?o:u,l=e.delimiter,d=void 0===l?" ":l,f=c(c(t,n,"$1\0$2"),h,"\0"),g=0,y=f.length;"\0"===f.charAt(g);)g++;for(;"\0"===f.charAt(y-1);)y--;return f.slice(g,y).split("\0").map(p).join(d)}(t,i({delimiter:"."},e))}function u(t,e){return void 0===e&&(e={}),h(t,n({delimiter:"_"},e))}},99694:(t,e,s)=>{const n=s(48089),{snakeCase:i}=s(99173),o={}.constructor;function r(t,e,s){return s.shouldRecurse?{shouldRecurse:s.shouldRecurse(t,e)}:void 0}t.exports=function(t,e){if(Array.isArray(t)){if(t.some((t=>t.constructor!==o)))throw new Error("obj must be array of plain objects")}else if(t.constructor!==o)throw new Error("obj must be an plain object");return e=Object.assign({deep:!0,exclude:[],parsingOptions:{}},e),n(t,(function(t,s){return[(n=e.exclude,o=t,n.some((function(t){return"string"==typeof t?t===o:t.test(o)}))?t:i(t,e.parsingOptions)),s,r(t,s,e)];var n,o}),e)}},99622:(t,e,s)=>{s.d(e,{q:()=>a});var n=s(97800),i=s(99694),o=s.n(i),r=s(67536);class a{constructor(){this.event="mp_feature_usage",this.name="feature-usage-handler",this.handlers=[{msgType:r.P,func:(t,e)=>{const s=n.Vy.for(this),i=o()(e.data);s.debug(`tracking ${this.event} [${i.event_name}] event`,{payload:i}),t.track(this.event,i)}}]}}},67536:(t,e,s)=>{s.d(e,{P:()=>i});var n=s(77201);class i extends n.QB{constructor(t){super(),this.data=t}}},46957:(t,e,s)=>{s.d(e,{b:()=>r,d:()=>o});var n=s(31002),i=s(72268);const o=t=>t instanceof n.rX?t.button===i.m.PRIMARY:t.buttons===i.O.PRIMARY,r=(t,e)=>{var s;const n=(null===(s=e.parentElement)||void 0===s?void 0:s.clientWidth)||0,i=e.offsetLeft,o=e.offsetWidth,r=Math.max(60,Math.min(90,.08*o));return 0===i&&t>0&&t<r||!(i+o<n)&&t>n-r}},41837:(t,e,s)=>{s.d(e,{QZ:()=>o,To:()=>h,bV:()=>u,hR:()=>i,kC:()=>a,sN:()=>r,wx:()=>c,z:()=>p});var n=s(77201);class i extends n.QB{constructor(t){super(),this.data=t}}class o extends n.QB{constructor(t){super(),this.data=t}}class r extends n.QB{}class a extends n.QB{constructor(t,e){super(),this.sid=t,this.text=e}}class c extends n.QB{constructor(t,e,s){super(),this.sid=t,this.oldText=e,this.newText=s}}class h extends n.QB{constructor(t){super(),this.data=t}}class u extends n.QB{constructor(t){super(),this.data=t}}class p extends n.QB{constructor(t,e,s){super(),this.opened=t,this.viewmode=e,this.count=s}}n.QB},95522:(t,e,s)=>{s.d(e,{N:()=>i});var n=s(77201);class i extends n.QB{constructor(t){super(),this.rating=t}}},23431:(t,e,s)=>{var n;s.d(e,{I:()=>n}),function(t){t[t.RoomLabels=0]="RoomLabels",t[t.Normal=1]="Normal"}(n||(n={}))},45979:(t,e,s)=>{s.d(e,{z:()=>a});var n=s(37458),i=s(68909),o=s(19968),r=s(97831);class a extends i.Object3D{constructor(t){super(),this.cameraData=t,this.visible=!0,this.width=1,this.height=1,this.renderOrder=n.X.exteriorSplat}updateDepthBuffer(t,e,s){this.depthBuffer=t,this.width=e,this.height=s}raycast(t,e){if(this.depthBuffer&&this.visible){const s=c(t.ray,this.cameraData,this.depthBuffer,this.width,this.height);s&&e.push({distance:t.ray.origin.distanceTo(s.pt),object:this,point:s.pt.clone(),normal:s.normal.clone(),face:{a:-1,b:-1,c:-1,materialIndex:-1,normal:s.normal.clone()}})}}}const c=(()=>{const t=new i.Vector2,e=new i.Vector3,s=new i.Vector3,n=new i.Vector3,r=new i.Vector3,a=new i.Vector3,c=new i.Vector3,u=new i.Vector3;return(p,l,d,f,g)=>{const y=(0,o.jn)(p.origin,l.pose.position,l.pose.rotation,l.pose.projection.asThreeMatrix4());t.set(2/l.width,2/l.height);const m=h(y,t,l,d,f,g);e.copy(y),e.y+=10*t.y;const b=h(e,t,l,d,f,g);s.copy(y),s.y-=10*t.y;const x=h(s,t,l,d,f,g);n.copy(y),n.x-=10*t.y;const w=h(n,t,l,d,f,g);r.copy(y),r.x+=10*t.y;const v=h(r,t,l,d,f,g);if(m){const t=new i.Vector3(0,0,0);let e=0;const s=[b,w,x,v];for(let n=0;n<s.length;n++){const i=s[n],o=s[(n+1)%s.length];i&&o&&(a.subVectors(i,m).normalize(),c.subVectors(o,m).normalize(),u.crossVectors(a,c).normalize(),t.add(u),e++)}if(e>1)return t.multiplyScalar(1/e),{pt:m,normal:t}}return null}})(),h=(()=>{const t=Math.floor(5),e=new i.Vector2,s=new i.Vector2(1,1),n=new i.Vector2,a=new i.Vector2,c=new i.Vector3,h=new i.Vector3;return(u,p,l,d,f,g)=>{const y=new i.Vector3(0,0,0);let m=0;for(let i=-t;i<=t;i++)for(let b=-t;b<=t;b++){e.set(b*p.x,i*p.y),n.copy(u).add(e),a.copy(n).add(s).multiplyScalar(.5),a.x*=f,a.y*=g;const t=d[4*(Math.floor(a.y)*Math.floor(f)+Math.floor(a.x))]*r.t;if(t<r.t&&t>0){const e=l.pose.position,s=(0,o.Ft)(l.pose,c.set(n.x,n.y,1),c);s.sub(e).normalize(),h.copy(e).addScaledVector(s,t),y.add(h),m++}}return m<5?null:(y.multiplyScalar(1/m),y)}})()},85846:(t,e,s)=>{s.d(e,{xO:()=>c});var n,i=s(48539),o=s(50380);!function(t){t.GET="GET",t.POST="POST",t.PATCH="PATCH",t.PUT="PUT",t.DELETE="DELETE",t.OPTIONS="OPTIONS"}(n||(n={}));class r{constructor(){this._options={responseType:"json"}}get options(){const t=this._options;return t.headers=(0,o.v)(this.url,this._options.headers||{},void 0),t}}class a extends r{constructor(t){super(),this.config=t,this.url=t.path}async read(){const{deserialize:t}=this.config;let e=null;return this.config.cachedData&&this.config.cachedData.data?e=this.config.cachedData.data:(e=await this.config.queue.get(this.config.path,this.options),this.config.cachedData&&(this.config.cachedData.data=e)),t(e)}clearCache(){this.config.cachedData&&(this.config.cachedData.data=null)}}class c extends a{constructor(t){super(t),this.config=t,this.acceptsPartial=!1,this.config.batchUpdate="batchUpdate"in this.config&&this.config.batchUpdate}async create(t){throw Error("Not implemented")}updateBatch(t,e){const{serialize:s}=this.config,i=[],o=[...new Set([...Object.keys(t),...Object.keys(e)])];for(const s of o){t[s]||e[s]||i.push(this.config.queue.delete(`${this.config.path}/${s}`,this.options))}const r=s(t,e),a=Object.assign(Object.assign({},this.options),{body:r});return i.push(this.config.queue.request(this.config.httpMethod||n.POST,this.config.path,a)),Promise.all(i)}updateInternal(t,e){const{serialize:s}=this.config,o=[],r=Object.assign({},this.options),a=Object.keys(t),c=Object.keys(e),h=(0,i.ij)(a.concat(c));for(const i in h){const a=h[i],c=t[a]||e[a];if(c){const t={};t[a]=c;const i={},h=e[a];h&&(i[a]=h);const u=s(t,i);r.body=u,o.push(this.config.queue.request(this.config.httpMethod||n.POST,this.config.path,r))}else o.push(this.config.queue.delete(`${this.config.path}/${a}`,this.options))}return Promise.all(o)}async update(t,e){this.clearCache(),await(this.config.batchUpdate?this.updateBatch(t,e||{}):this.updateInternal(t,e||{}))}async delete(t){throw Error("Not implemented")}}},16964:(t,e,s)=>{s.d(e,{l:()=>i});var n=s(68909);class i extends n.Mesh{constructor(t=100,e,s,n=1){super(e,s),this.capacity=t,this.numInstances=n,this.topIdx=0,this.indexMap=new Map,this.viewMap=new Map,this.frustumCulled=!1,this.matrixAutoUpdate=!1}allocInstance(t){const e=this.topIdx;return this.topIdx++,this.topIdx>=this.capacity&&this.doubleBufferCapacities(),this.indexMap.set(t,e),this.viewMap.set(e,t),this.geometry.instanceCount=this.topIdx*this.numInstances,e}removeInstance(t){const e=this.indexMap.get(t);if(null!=e){const s=this.topIdx-1;this.moveInstanceData(s,e),this.indexMap.delete(t),this.viewMap.delete(e);const n=this.viewMap.get(s);null!=n&&(this.indexMap.set(n,e),this.viewMap.set(e,n)),this.topIdx--,this.geometry.instanceCount=this.topIdx*this.numInstances}}removeAllInstances(){this.topIdx=0,this.geometry.instanceCount=0,this.indexMap.clear(),this.viewMap.clear()}moveInstanceData(t,e){if(t!==e)for(const s of this.allAttributeNames){const i=this[s];if(i instanceof n.InstancedBufferAttribute){const s=i.itemSize;for(let n=0;n<this.numInstances;n++)for(let o=0;o<s;o++)i.array[s*(this.numInstances*e+n)+o]=i.array[s*(this.numInstances*t+n)+o];i.needsUpdate=!0}}}get allAttributeNames(){const t=[];for(const e in this)this[e]instanceof n.InstancedBufferAttribute&&t.push(e);return t}*getIndices(t){const e=this.indexMap.get(t);if(null!=e)for(let t=0;t<this.numInstances;t++)yield this.numInstances*e+t}get capacityForAllInstances(){return this.capacity*this.numInstances}doubleBufferCapacities(){this.capacity=2*this.capacity;const t=[];for(const e of this.allAttributeNames){const s=this[e];s instanceof n.InstancedBufferAttribute&&t.push([e,this.expandCapacityForAttr(s)])}this.geometry.dispose();for(const[e,s]of t)this[e]=s,this.geometry.setAttribute(e,s)}expandCapacityForAttr(t){const e=t.array instanceof Uint8Array,s=!!e,i=new(e?Uint8Array:Float32Array)(this.capacity*t.itemSize*this.numInstances);return i.set(t.array),new n.InstancedBufferAttribute(i,t.itemSize,s)}}}}]);